(function(t){function e(e){for(var n,a,i=e[0],l=e[1],u=e[2],p=0,d=[];p<i.length;p++)a=i[p],Object.prototype.hasOwnProperty.call(s,a)&&s[a]&&d.push(s[a][0]),s[a]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);c&&c(e);while(d.length)d.shift()();return o.push.apply(o,u||[]),r()}function r(){for(var t,e=0;e<o.length;e++){for(var r=o[e],n=!0,i=1;i<r.length;i++){var l=r[i];0!==s[l]&&(n=!1)}n&&(o.splice(e--,1),t=a(a.s=r[0]))}return t}var n={},s={app:0},o=[];function a(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=t,a.c=n,a.d=function(t,e,r){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)a.d(r,n,function(e){return t[e]}.bind(null,n));return r},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=e,i=i.slice();for(var u=0;u<i.length;u++)e(i[u]);var c=l;o.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"266e":function(t,e,r){},"4ecb":function(t,e,r){},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-app",[""!=t.displayAlert?r("v-alert",{attrs:{type:t.alertType,dismissible:""}},[t._v(t._s(t.displayAlert)+" ")]):t._e(),r("router-view",{on:{alert:t.DisplayAlert}})],1)},o=[],a={components:{},data:function(){return{displayAlert:"",alertType:"success"}},methods:{DisplayAlert:function(t){this.alertType=t[0],this.displayAlert=t[1]}},watch:{displayAlert:function(){var t=this;setTimeout((function(){return t.displayAlert=""}),4e3)}}},i=a,l=r("2877"),u=r("6544"),c=r.n(u),p=r("0798"),d=r("7496"),f=Object(l["a"])(i,s,o,!1,null,null,null),m=f.exports;c()(f,{VAlert:p["a"],VApp:d["a"]});r("caad");var g=r("8c4f"),h=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-column",[r("v-row",{staticClass:"justify-center"},[r("v-logo-banner")],1),r("br"),r("v-row",{staticClass:"justify-center"},[r("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[r("v-row",{attrs:{justify:"center"}},[r("v-text-field",{attrs:{rules:t.emailRules,label:"E-mail",required:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),r("v-row",{attrs:{justify:"center"}},[r("v-text-field",{attrs:{label:"Password",rules:t.passwordRules,"append-icon":t.pswVisibility?"visibility":"visibility_off",type:t.pswVisibility?"password":"text",required:""},on:{"click:append":function(){return t.pswVisibility=!t.pswVisibility}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),r("br"),r("v-row",{attrs:{justify:"center"}},[r("v-btn",{staticClass:"mr white--text",attrs:{block:"",outline:"","x-large":"",color:"rgba(0,32,96,255)"},on:{click:t.validateForm}},[t._v(" Login ")])],1)],1)],1),r("br"),r("v-row",{attrs:{justify:"center"}},[r("v-item",{staticClass:"caption"},[r("router-link",{attrs:{to:"/register"}},[t._v("You don't have an account? ")])],1)],1)],1)},v=[],b=(r("ac1f"),r("00b4"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-banner",{staticClass:"vbanner",attrs:{sticky:"",dark:"",align:"center"}},[r("div",{staticClass:"banner"},[r("span",{staticClass:"parke"},[t._v("Parke")]),r("span",{staticClass:"d"},[t._v("D")])])])],1)}),w=[],y={components:{},props:{},data:function(){return{}},mounted:function(){},computed:{},methods:{},watch:{}},k=y,C=(r("80bf"),r("e4e5")),j=Object(l["a"])(k,b,w,!1,null,"ac281300",null),_=j.exports;c()(j,{VBanner:C["a"]});var x=r("bee2"),V=r("d4ec"),O=Object(x["a"])((function t(e,r,n){Object(V["a"])(this,t),this.username=e,this.email=r,this.password=n})),$={components:{VLogoBanner:_},props:{},data:function(){return{user:new O("","",""),submitted:!1,successful:!1,valid:!1,message:"",password:"",error:"",pswVisibility:String,pswCVisibility:String,email:"",emailRules:[function(t){return!!t||"E-mail is required"},function(t){return/.+@.+\..+/.test(t)||"E-mail must be valid"}],passwordRules:[function(t){return!!t||"Password is required"},function(t){return t&&t.length>=6||"At least 6 characters"}]}},created:function(){this.loggedIn&&this.$router.push("/profile")},computed:{loggedIn:function(){return this.$store.state.auth.status.loggedIn}},methods:{validateForm:function(){this.$refs.form.validate()?this.handleLogin():alert("Form is not valid")},handleLogin:function(){var t=this,e={username:this.email,email:this.email,password:this.password};this.$store.dispatch("auth/login",e).then((function(e){t.message=e,t.$emit("alert",["success","Welcome!"]),t.$router.push("/profile")})).catch((function(e){t.error=e,t.$emit("alert",["error","Something went wrong. Please, try again"])}))}},watch:{}},P=$,S=(r("da41"),r("8336")),I=r("4bd4"),F=r("d903"),L=r("0fd9"),M=r("8654"),R=Object(l["a"])(P,h,v,!1,null,null,null),A=R.exports;c()(R,{VBtn:S["a"],VForm:I["a"],VItem:F["a"],VRow:L["a"],VTextField:M["a"]});var E=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-column",[r("v-row",{staticClass:"justify-center"},[r("v-logo-banner")],1),r("br"),r("v-row",{staticClass:"justify-center"},[r("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[r("v-row",{attrs:{justify:"center"}},[r("v-text-field",{attrs:{rules:t.emailRules,label:"E-mail",required:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),r("v-row",{attrs:{justify:"center"}},[r("v-text-field",{attrs:{label:"Password",rules:t.passwordRules,"append-icon":t.pswVisibility?"visibility":"visibility_off",type:t.pswVisibility?"password":"text",required:""},on:{"click:append":function(){return t.pswVisibility=!t.pswVisibility}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),r("v-row",{attrs:{justify:"center"}},[r("v-text-field",{attrs:{label:"Confirm Password",rules:t.passwordConfRules,"append-icon":t.pswCVisibility?"visibility":"visibility_off",type:t.pswCVisibility?"password":"text",required:""},on:{"click:append":function(){return t.pswCVisibility=!t.pswCVisibility}},model:{value:t.passwordConf,callback:function(e){t.passwordConf=e},expression:"passwordConf"}})],1),r("br"),r("v-row",{attrs:{justify:"center"}},[r("v-btn",{staticClass:"mr white--text",attrs:{block:"",outline:"","x-large":"",color:"rgba(0,32,96,255)"},on:{click:t.validateForm}},[t._v(" Register ")])],1)],1)],1),r("br"),r("v-row",{attrs:{justify:"center"}},[r("v-item",{staticClass:"caption"},[r("router-link",{attrs:{to:"/login"}},[t._v("Already have an account? ")])],1)],1)],1)},z=[],T={components:{VLogoBanner:_},props:{},data:function(){var t=this;return{user:new O("","",""),submitted:!1,successful:!1,valid:!1,message:"",password:"",passwordConf:"",error:"",pswVisibility:String,pswCVisibility:String,email:"",emailRules:[function(t){return!!t||"E-mail is required"},function(t){return/.+@.+\..+/.test(t)||"E-mail must be valid"}],passwordRules:[function(t){return!!t||"Password is required"},function(t){return t&&t.length>=6||"At least 6 characters"}],passwordConfRules:[function(e){return e===t.password||"Password must match"}]}},mounted:function(){this.loggedIn&&this.$router.push("/profile")},computed:{loggedIn:function(){return this.$store.state.auth.status.loggedIn}},methods:{validateForm:function(){this.$refs.form.validate()?this.handleRegister():alert("Form is not valid")},handleRegister:function(){var t=this,e=new FormData;e.append("username",this.email),e.append("email",this.email),e.append("password",this.password),this.$store.dispatch("auth/register",e).then((function(e){t.message=e,t.$emit("alert",["success","Your account is ready. You can now Login"]),t.$router.push("/login")})).catch((function(e){t.error=e,t.$emit("alert",["error","Something went wrong. This email is already used"])}))}},watch:{}},q=T,D=(r("ac59"),Object(l["a"])(q,E,z,!1,null,null,null)),B=D.exports;c()(D,{VBtn:S["a"],VForm:I["a"],VItem:F["a"],VRow:L["a"],VTextField:M["a"]});var U=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{on:{click:t.logOut}},[t._v("Profile")]),r("header",[r("h3",[r("strong",[t._v(t._s(t.currentUser.username))])])])])},W=[],J={name:"Profile",computed:{currentUser:function(){return this.$store.state.auth.user}},mounted:function(){this.currentUser||this.$router.push("/login")},methods:{logOut:function(){this.$store.dispatch("auth/logout"),this.$router.push("/login")}}},G=J,H=Object(l["a"])(G,U,W,!1,null,null,null),Y=H.exports,N=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-col",[r("router-link",{attrs:{to:"/profile"}},[r("strong",[t._v(t._s(t.currentUser.username))])]),r("div",[r("br"),r("GmapMap",{ref:"map",staticStyle:{width:"100%",height:"600px"},attrs:{draggable:!0,options:{zoomControl:!0},zoomControl:"true",zoom:t.zoom,center:{lat:38.26030427395903,lng:21.744173387859256}},on:{zoom_changed:t.getCurrentZoom,center_changed:t.getCurrentCenter,"update:zoom":function(e){t.zoom=e}}},t._l(t.locations,(function(t,e){return r("gmap-marker",{key:e,attrs:{position:t,label:t.label}})})),1)],1),r("v-row",{staticClass:"justify-center"},[r("v-logo-banner")],1)],1)},Z=[],K=(r("b64b"),r("e439"),r("bc3a")),Q=r.n(K),X="https://parked-iot-project.herokuapp.com/",tt=function(){function t(){Object(V["a"])(this,t)}return Object(x["a"])(t,[{key:"post",value:function(t,e){return Q.a.post(X+e,t)}}]),t}(),et=new tt,rt={components:{VLogoBanner:_},props:{},data:function(){return{getMarkersWait:!1,zoom:5,center:{lat:38.26030427395903,lng:21.744173387859256},locationMarkers:[],locPlaces:[],existingPlace:null,locations:[],test:"",currentCenterLat:38.26030427395903,currentCenterLng:21.744173387859256}},computed:{currentUser:function(){return this.$store.state.auth.user}},mounted:function(){this.currentUser||this.$router.push("/login"),this.createMarkers()},methods:{getCurrentZoom:function(t){this.zoom=t},getCurrentCenter:function(t){this.test=Object.keys(t),this.currentCenterLat=t.lat(),this.currentCenterLng=t.lng(),this.createMarkers()},locateGeoLocation:function(){var t=this;navigator.geolocation.getCurrentPosition((function(e){t.center={lat:e.coords.latitude,lng:e.coords.longitude}}))},createMarkers:function(){var t=this;this.getMarkersWait||(this.locations=[],setTimeout(this.getMarkers(),1e3),this.getMarkersWait=!0,setTimeout((function(){t.getMarkersWait=!1}),200))},getMarkers:function(){var t=this,e=new FormData;e.append("gpsLong",this.currentCenterLng),e.append("gpsLat",this.currentCenterLat),et.post(e,"spots/available/").then((function(e){t.test=e;var r=e.data;for(var n in r)Object.defineProperty(r[n],"lng",Object.getOwnPropertyDescriptor(r[n],"long")),delete r[n]["long"],t.locations.push(r[n]);t.test=r})).catch((function(e){t.test=e}))}}},nt=rt,st=r("62ad"),ot=Object(l["a"])(nt,N,Z,!1,null,null,null),at=ot.exports;c()(ot,{VCol:st["a"],VRow:L["a"]}),n["default"].use(g["a"]);var it=[{path:"/",component:A},{path:"/login",component:A,meta:{guest:!0}},{path:"/register",component:B,meta:{guest:!0}},{path:"/profile",component:Y,meta:{requiresAuth:!0}},{path:"/parked",component:at}],lt=new g["a"]({mode:"history",base:"/",routes:it,linkActiveClass:"is-active"});lt.beforeEach((function(t,e,r){var n=["/login","/register","/home"],s=!n.includes(t.path),o=localStorage.getItem("user");s&&!o?r("/login"):r()}));var ut=lt,ct=r("ce5b"),pt=r.n(ct),dt=(r("bf40"),r("f309"));n["default"].use(dt["a"]);var ft=new dt["a"]({}),mt=r("2f62"),gt=(r("d3b7"),r("e9c4"),"https://parked-iot-project.herokuapp.com/"),ht=function(){function t(){Object(V["a"])(this,t)}return Object(x["a"])(t,[{key:"logout",value:function(){localStorage.removeItem("user")}},{key:"login",value:function(t){console.log("login"),console.log(t);var e=new FormData;return e.append("username",t.username),e.append("email",t.username),e.append("password",t.password),Q.a.post(gt+"usersign/login/",e).then((function(t){if(t.data.token){var r={username:e.get("username"),password:e.get("password"),token:t.data.token};return console.log("here"),console.log(r),localStorage.setItem("user",JSON.stringify(r)),console.log("there"),r}})).catch((function(t){return t}))}},{key:"register",value:function(t){return Q.a.post(gt+"usersign/register/",t)}}]),t}(),vt=new ht,bt=JSON.parse(localStorage.getItem("user")),wt=bt?{status:{loggedIn:!0},user:bt}:{status:{loggedIn:!1},user:null},yt={namespaced:!0,state:wt,actions:{login:function(t,e){var r=t.commit;return vt.login(e).then((function(t){return r("loginSuccess",t),Promise.resolve(t)}),(function(t){return r("loginFailure"),Promise.reject(t)}))},logout:function(t){var e=t.commit;vt.logout(),e("logout")},register:function(t,e){var r=t.commit;return vt.register(e).then((function(t){return r("registerSuccess"),Promise.resolve(t.data)}),(function(t){return r("registerFailure"),Promise.reject(t)}))}},mutations:{loginSuccess:function(t,e){t.status.loggedIn=!0,t.user=e},loginFailure:function(t){t.status.loggedIn=!1,t.user=null},logout:function(t){t.status.loggedIn=!1,t.user=null},registerSuccess:function(t){t.status.loggedIn=!1},registerFailure:function(t){t.status.loggedIn=!1}}};n["default"].use(mt["a"]);var kt=new mt["a"].Store({modules:{auth:yt}}),Ct=r("755e"),jt=r("7bb1");n["default"].use(jt),n["default"].use(Ct,{load:{key:"AIzaSyCyOBuqzRmGjbOEQCeHVDHHsjML57kUnKM",libraries:"places"}}),n["default"].use(pt.a),n["default"].config.productionTip=!1,new n["default"]({el:"#app",vuetify:ft,router:ut,store:kt,render:function(t){return t(m)}}).$mount("#app")},"80bf":function(t,e,r){"use strict";r("4ecb")},9797:function(t,e,r){},ac59:function(t,e,r){"use strict";r("9797")},da41:function(t,e,r){"use strict";r("266e")}});
//# sourceMappingURL=app.a68d90a2.js.map