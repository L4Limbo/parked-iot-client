(function(t){function e(e){for(var o,i,s=e[0],l=e[1],c=e[2],p=0,d=[];p<s.length;p++)i=s[p],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&d.push(r[i][0]),r[i]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(t[o]=l[o]);u&&u(e);while(d.length)d.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],o=!0,s=1;s<n.length;s++){var l=n[s];0!==r[l]&&(o=!1)}o&&(a.splice(e--,1),t=i(i.s=n[0]))}return t}var o={},r={app:0},a=[];function i(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=o,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var u=l;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"266e":function(t,e,n){},"2c39":function(t,e,n){"use strict";n("6a18")},"4ecb":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[""!=t.displayAlert?n("v-alert",{attrs:{type:t.alertType,dismissible:""}},[t._v(t._s(t.displayAlert)+" ")]):t._e(),n("router-view",{on:{alert:t.DisplayAlert}})],1)},a=[],i={components:{},data:function(){return{displayAlert:"",alertType:"success"}},methods:{DisplayAlert:function(t){this.alertType=t[0],this.displayAlert=t[1]}},watch:{displayAlert:function(){var t=this;setTimeout((function(){return t.displayAlert=""}),4e3)}}},s=i,l=n("2877"),c=n("6544"),u=n.n(c),p=n("0798"),d=n("7496"),f=Object(l["a"])(s,r,a,!1,null,null,null),m=f.exports;u()(f,{VAlert:p["a"],VApp:d["a"]});n("caad");var v=n("8c4f"),g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-column",[n("v-row",{staticClass:"justify-center"},[n("v-logo-banner")],1),n("br"),n("v-row",{staticClass:"justify-center"},[n("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[n("v-row",{attrs:{justify:"center"}},[n("v-text-field",{attrs:{rules:t.emailRules,label:"E-mail",required:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),n("v-row",{attrs:{justify:"center"}},[n("v-text-field",{attrs:{label:"Password",rules:t.passwordRules,"append-icon":t.pswVisibility?"visibility":"visibility_off",type:t.pswVisibility?"password":"text",required:""},on:{"click:append":function(){return t.pswVisibility=!t.pswVisibility}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),n("br"),n("v-row",{attrs:{justify:"center"}},[n("v-btn",{staticClass:"mr white--text",attrs:{block:"",outline:"","x-large":"",color:"rgba(0,32,96,255)"},on:{click:t.validateForm}},[t._v(" Login ")])],1)],1)],1),n("br"),n("v-row",{attrs:{justify:"center"}},[n("v-item",{staticClass:"caption"},[n("router-link",{attrs:{to:"/register"}},[t._v("You don't have an account? ")])],1)],1)],1)},h=[],b=(n("ac1f"),n("00b4"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-banner",{staticClass:"vbanner",attrs:{sticky:"",dark:"",align:"center"}},[n("div",{staticClass:"banner"},[n("span",{staticClass:"parke"},[t._v("Parke")]),n("span",{staticClass:"d"},[t._v("D")])])])],1)}),w=[],y={components:{},props:{},data:function(){return{}},mounted:function(){},computed:{},methods:{},watch:{}},k=y,C=(n("80bf"),n("e4e5")),x=Object(l["a"])(k,b,w,!1,null,"ac281300",null),_=x.exports;u()(x,{VBanner:C["a"]});var V=n("bee2"),j=n("d4ec"),P=Object(V["a"])((function t(e,n,o){Object(j["a"])(this,t),this.username=e,this.email=n,this.password=o})),S={components:{VLogoBanner:_},props:{},data:function(){return{user:new P("","",""),submitted:!1,successful:!1,valid:!1,message:"",password:"",error:"",pswVisibility:String,pswCVisibility:String,email:"",emailRules:[function(t){return!!t||"E-mail is required"},function(t){return/.+@.+\..+/.test(t)||"E-mail must be valid"}],passwordRules:[function(t){return!!t||"Password is required"},function(t){return t&&t.length>=6||"At least 6 characters"}]}},created:function(){this.loggedIn&&this.$router.push("/profile")},computed:{loggedIn:function(){return this.$store.state.auth.status.loggedIn}},methods:{validateForm:function(){this.$refs.form.validate()?this.handleLogin():alert("Form is not valid")},handleLogin:function(){var t=this,e={username:this.email,email:this.email,password:this.password};this.$store.dispatch("auth/login",e).then((function(e){t.message=e,t.message?(t.$emit("alert",["success","Welcome!"]),t.$router.push("/profile")):t.$emit("alert",["error","Something went wrong. Please, try again"])})).catch((function(e){t.error=e,t.$emit("alert",["error","Something went wrong. Please, try again"])}))}},watch:{}},$=S,O=(n("da41"),n("8336")),I=n("4bd4"),F=n("d903"),L=n("0fd9"),T=n("8654"),R=Object(l["a"])($,g,h,!1,null,null,null),W=R.exports;u()(R,{VBtn:O["a"],VForm:I["a"],VItem:F["a"],VRow:L["a"],VTextField:T["a"]});var A=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-column",[n("v-row",{staticClass:"justify-center"},[n("v-logo-banner")],1),n("br"),n("v-row",{staticClass:"justify-center"},[n("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[n("v-row",{attrs:{justify:"center"}},[n("v-text-field",{attrs:{rules:t.emailRules,label:"E-mail",required:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),n("v-row",{attrs:{justify:"center"}},[n("v-text-field",{attrs:{label:"Password",rules:t.passwordRules,"append-icon":t.pswVisibility?"visibility":"visibility_off",type:t.pswVisibility?"password":"text",required:""},on:{"click:append":function(){return t.pswVisibility=!t.pswVisibility}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),n("v-row",{attrs:{justify:"center"}},[n("v-text-field",{attrs:{label:"Confirm Password",rules:t.passwordConfRules,"append-icon":t.pswCVisibility?"visibility":"visibility_off",type:t.pswCVisibility?"password":"text",required:""},on:{"click:append":function(){return t.pswCVisibility=!t.pswCVisibility}},model:{value:t.passwordConf,callback:function(e){t.passwordConf=e},expression:"passwordConf"}})],1),n("br"),n("v-row",{attrs:{justify:"center"}},[n("v-btn",{staticClass:"mr white--text",attrs:{block:"",outline:"","x-large":"",color:"rgba(0,32,96,255)"},on:{click:t.validateForm}},[t._v(" Register ")])],1)],1)],1),n("br"),n("v-row",{attrs:{justify:"center"}},[n("v-item",{staticClass:"caption"},[n("router-link",{attrs:{to:"/login"}},[t._v("Already have an account? ")])],1)],1)],1)},M=[],E={components:{VLogoBanner:_},props:{},data:function(){var t=this;return{user:new P("","",""),submitted:!1,successful:!1,valid:!1,message:"",password:"",passwordConf:"",error:"",pswVisibility:String,pswCVisibility:String,email:"",emailRules:[function(t){return!!t||"E-mail is required"},function(t){return/.+@.+\..+/.test(t)||"E-mail must be valid"}],passwordRules:[function(t){return!!t||"Password is required"},function(t){return t&&t.length>=6||"At least 6 characters"}],passwordConfRules:[function(e){return e===t.password||"Password must match"}]}},mounted:function(){this.loggedIn&&this.$router.push("/profile")},computed:{loggedIn:function(){return this.$store.state.auth.status.loggedIn}},methods:{validateForm:function(){this.$refs.form.validate()?this.handleRegister():alert("Form is not valid")},handleRegister:function(){var t=this,e=new FormData;e.append("username",this.email),e.append("email",this.email),e.append("password",this.password),this.$store.dispatch("auth/register",e).then((function(e){t.message=e,t.$emit("alert",["success","Your account is ready. You can now Login"]),t.$router.push("/login")})).catch((function(e){t.error=e,t.$emit("alert",["error","Something went wrong. This email is already used"])}))}},watch:{}},z=E,q=(n("ac59"),Object(l["a"])(z,A,M,!1,null,null,null)),B=q.exports;u()(q,{VBtn:O["a"],VForm:I["a"],VItem:F["a"],VRow:L["a"],VTextField:T["a"]});var D=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{on:{click:t.logOut}},[t._v("Profile")]),n("header",[n("h3",[n("strong",[t._v(t._s(t.currentUser.username))])])])])},U=[],G={name:"Profile",computed:{currentUser:function(){return this.$store.state.auth.user}},mounted:function(){this.currentUser||this.$router.push("/login")},methods:{logOut:function(){this.$store.dispatch("auth/logout"),this.$router.push("/login")}}},H=G,J=Object(l["a"])(H,D,U,!1,null,null,null),N=J.exports,Y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{attrs:{fluid:""}},[n("v-flex",{attrs:{xs12:""}},[n("v-row",[n("v-banner",{attrs:{color:"primary",dark:"",elevation:"10","single-line":"",sticky:"",shaped:"",tile:"",width:"100%"}},[n("v-row",{attrs:{"no-gutters":""}},[n("v-flex",{attrs:{xs12:""}},[n("v-icon",[t._v("mdi-magnify")]),t._v(" Â  "),n("GmapAutocomplete",{attrs:{color:"white"},on:{place_changed:t.setPlace}})],1)],1)],1)],1),n("v-row",[n("v-container",[n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs12:""}},[n("v-card",{attrs:{color:"blue",height:"100%"}},[n("GmapMap",{ref:"map",staticStyle:{width:"100%",height:"83vh"},attrs:{draggable:!0,options:{zoomControl:!0,mapTypeControl:!1,scaleControl:!1,streetViewControl:!1,rotateControl:!1,fullscreenControl:!0,disableDefaultUi:!1},zoomControl:"true",zoom:t.zoom,center:{lat:38.26030427395903,lng:21.744173387859256}},on:{zoom_changed:t.getCurrentZoom,center_changed:t.getCurrentCenter,"update:zoom":function(e){t.zoom=e}}},[t._l(t.locations,(function(e,o){return n("gmap-marker",{key:o,attrs:{position:e,label:e.label,clickable:!0,icon:e.icon},on:{click:function(e){return t.openInfoWindowTemplate(o)}}})})),n("gmap-info-window",{attrs:{options:{maxWidth:300,pixelOffset:{width:0,height:-35}},position:t.infoWindow.position,opened:t.infoWindow.open},on:{closeclick:t.closeWindowInfo}},[n("div",{domProps:{innerHTML:t._s(t.infoWindow.template)}})])],2)],1)],1)],1)],1)],1),n("v-card",{staticClass:"float-end",style:{position:"absolute",top:"15%",right:"-1%"},attrs:{outlined:"",color:"transparent",absolute:"",right:""}},t._l(1,(function(e){return n("v-col",{key:e},[n("v-row",{attrs:{justify:"space-around","no-gutters":""}},[n("v-btn",{attrs:{color:"primary",elevation:"12",fab:"",small:"",dark:""},on:{click:t.locateGeoLocation}},[n("v-icon",[t._v("mdi-crosshairs")])],1)],1),n("br"),n("v-row",{attrs:{justify:"space-around","no-gutters":""}},[n("v-btn",{attrs:{disabled:0==t.Paction,color:"primary",elevation:"12",fab:"",small:""}},[n("v-icon",[t._v("mdi-parking")])],1)],1),n("br"),n("v-row",{attrs:{justify:"space-around","no-gutters":""}},[n("v-btn",{attrs:{color:"primary",elevation:"12",fab:"",small:"",dark:""},on:{click:function(e){t.openFilters=!0}}},[n("v-icon",[t._v("mdi-filter")])],1)],1),n("br"),n("v-row")],1)})),1),n("v-row",{staticClass:"justify-center"},[n("v-bottom-navigation",{attrs:{absolute:"",value:t.value,"background-color":"blue"}},[n("v-btn",[n("span",[t._v("Profile")]),n("router-link",{attrs:{to:"/profile"}},[n("v-icon",{attrs:{color:"white"}},[t._v("mdi-account")])],1)],1),n("v-btn",[n("span",[t._v("Saved")]),n("v-icon",{attrs:{color:"white"}},[t._v("mdi-heart")])],1),n("v-btn",[n("span",[t._v("Places")]),n("v-icon",{attrs:{color:"white"}},[t._v("mdi-shopping")])],1),n("v-btn",[n("span",[t._v("Logout")]),n("v-icon",{attrs:{color:"white"}},[t._v("mdi-logout-variant")])],1)],1)],1),n("v-bottom-sheet",{attrs:{persistent:"",width:"100%","hide-overlay":""},model:{value:t.openFilters,callback:function(e){t.openFilters=e},expression:"openFilters"}},[n("v-card",[n("v-card-title",{staticClass:"text blue lighten-2"},[n("v-row",{attrs:{"no-gutters":""}},[n("v-flex",{attrs:{xs5:""}},[t._v(" Filters ")]),n("v-flex",{attrs:{xs1:"","offset-5":""}},[n("v-btn",{attrs:{text:""},on:{click:function(e){t.openFilters=!1}}},[n("v-icon",[t._v("mdi-close")])],1)],1)],1)],1),n("br"),n("v-card-text",{staticStyle:{}},[n("v-select",{attrs:{dense:"",items:t.cars,"item-text":"label","item-value":"value",label:"Car Type",outlined:""},model:{value:t.car,callback:function(e){t.car=e},expression:"car"}}),n("v-select",{attrs:{dense:"",items:t.ramps,"item-text":"label","item-value":"value",label:"Ramp",outlined:""},model:{value:t.ramp,callback:function(e){t.ramp=e},expression:"ramp"}}),n("v-slider",{attrs:{dense:"",hint:"Im a hint",step:"5",min:"10",max:"100","thumb-label":"always",width:"50%",label:"Distance"},model:{value:t.distance,callback:function(e){t.distance=e},expression:"distance"}})],1)],1)],1)],1)],1)},Z=[],K=(n("d81d"),n("99af"),n("bc3a")),Q=n.n(K),X="https://parked-iot-project.herokuapp.com/",tt=function(){function t(){Object(j["a"])(this,t)}return Object(V["a"])(t,[{key:"post",value:function(t,e){return Q.a.post(X+e,t)}}]),t}(),et=new tt,nt={components:{},props:{},data:function(){return{selectedParkingSpot:{},Paction:!1,infoWindow:{position:{lat:0,lng:0},open:!1,template:""},car:"car",ramp:0,distance:100,ramps:[{label:"Yes",value:1},{label:"No",value:0}],cars:[{label:"Car",value:"car"},{label:"Van",value:"van"},{label:"Single-Side Van",value:"singleSideVan"}],openFilters:!1,getMarkersWait:!1,zoom:15,center:{lat:38.26030427395903,lng:21.744173387859256},locationMarkers:[],locPlaces:[],existingPlace:null,locations:[],test:"",currentCenterLat:38.26030427395903,currentCenterLng:21.744173387859256}},computed:{currentUser:function(){return this.$store.state.auth.user}},created:function(){this.locateGeoLocation()},mounted:function(){this.currentUser||this.$router.push("/login"),this.createMarkers(),this.locateGeoLocation()},methods:{setPlace:function(t){this.$refs.map.$mapPromise.then((function(e){e.panTo({lat:t.geometry.location.lat(),lng:t.geometry.location.lng()})}))},getCurrentZoom:function(t){this.zoom=t},getCurrentCenter:function(t){this.currentCenterLat=t.lat(),this.currentCenterLng=t.lng(),this.createMarkers()},locateGeoLocation:function(){var t=this;navigator.geolocation.getCurrentPosition((function(e){t.center={lat:e.coords.latitude,lng:e.coords.longitude},t.$refs.map.$mapPromise.then((function(t){t.panTo({lat:e.coords.latitude,lng:e.coords.longitude})}))}))},createMarkers:function(){var t=this;this.getMarkersWait||(this.infoWindow.open=!1,this.Paction=!1,this.selectedParkingSpot={},this.locations=[],setTimeout(this.getMarkers(),1e3),this.getMarkersWait=!0,setTimeout((function(){t.getMarkersWait=!1}),200))},getMarkers:function(){var t=this,e=new FormData;e.append("gpsLong",this.currentCenterLng),e.append("gpsLat",this.currentCenterLat),et.post(e,"spots/available/").then((function(e){t.test=e;var n=e.data;for(var o in n)n[o]["icon"]="http://maps.google.com/mapfiles/ms/icons/red-dot.png",n[o]["id"]=o,t.locations.push(n[o])})).catch((function(e){t.test=e}))},openInfoWindowTemplate:function(t){for(var e in this.test=t,this.Paction=!0,this.locations[t].icon="http://maps.google.com/mapfiles/ms/icons/green-dot.png",this.selectedParkingSpot=this.locations[t],this.locations)e!=t&&(this.locations[e].icon="http://maps.google.com/mapfiles/ms/icons/red-dot.png");var n=this.locations[t],o=n.lat,r=n.lng,a=n.ramp,i=n.type,s=n.dist;this.infoWindow.position={lat:o,lng:r},a=0==a?"Available":"Unavailable",i="car"==i?"Car":"van"==i?"Van":"Single-Side Van",this.test={lat:o,lng:r,ramp:a,type:i,dist:s},this.infoWindow.template="<b> Ramp:</b> ".concat(a,"<br><b>Distance:</b> ").concat(s," meters<br><b>Car Type:</b> ").concat(i,"<br>"),this.infoWindow.open=!0},closeWindowInfo:function(){for(var t in this.Paction=!1,this.infoWindow.open=!1,this.selectedParkingSpot={},this.locations)this.locations[t].icon="http://maps.google.com/mapfiles/ms/icons/red-dot.png"}},watch:{}},ot=nt,rt=(n("2c39"),n("b81c")),at=n("288c"),it=n("b0af"),st=n("99d9"),lt=n("62ad"),ct=n("a523"),ut=n("0e8f"),pt=n("132d"),dt=n("a722"),ft=n("b974"),mt=n("ba0d"),vt=Object(l["a"])(ot,Y,Z,!1,null,"9ebe3fb2",null),gt=vt.exports;u()(vt,{VBanner:C["a"],VBottomNavigation:rt["a"],VBottomSheet:at["a"],VBtn:O["a"],VCard:it["a"],VCardText:st["a"],VCardTitle:st["b"],VCol:lt["a"],VContainer:ct["a"],VFlex:ut["a"],VIcon:pt["a"],VLayout:dt["a"],VRow:L["a"],VSelect:ft["a"],VSlider:mt["a"]}),o["default"].use(v["a"]);var ht=[{path:"/",component:W},{path:"/login",component:W,meta:{guest:!0}},{path:"/register",component:B,meta:{guest:!0}},{path:"/profile",component:N,meta:{requiresAuth:!0}},{path:"/parked",component:gt}],bt=new v["a"]({mode:"history",base:"/",routes:ht,linkActiveClass:"is-active"});bt.beforeEach((function(t,e,n){var o=["/login","/register","/home"],r=!o.includes(t.path),a=localStorage.getItem("user");r&&!a?n("/login"):n()}));var wt=bt,yt=n("ce5b"),kt=n.n(yt),Ct=(n("bf40"),n("f309"));o["default"].use(Ct["a"]);var xt=new Ct["a"]({}),_t=n("2f62"),Vt=(n("d3b7"),n("e9c4"),"https://parked-iot-project.herokuapp.com/"),jt=function(){function t(){Object(j["a"])(this,t)}return Object(V["a"])(t,[{key:"logout",value:function(){localStorage.removeItem("user")}},{key:"login",value:function(t){console.log("login"),console.log(t);var e=new FormData;return e.append("username",t.username),e.append("email",t.username),e.append("password",t.password),Q.a.post(Vt+"usersign/login/",e).then((function(t){if(t.data.token){var n={username:e.get("username"),password:e.get("password"),token:t.data.token};return console.log("here"),console.log(n),localStorage.setItem("user",JSON.stringify(n)),console.log("there"),n}})).catch((function(t){return t}))}},{key:"register",value:function(t){return Q.a.post(Vt+"usersign/register/",t)}}]),t}(),Pt=new jt,St=JSON.parse(localStorage.getItem("user")),$t=St?{status:{loggedIn:!0},user:St}:{status:{loggedIn:!1},user:null},Ot={namespaced:!0,state:$t,actions:{login:function(t,e){var n=t.commit;return Pt.login(e).then((function(t){return n("loginSuccess",t),Promise.resolve(t)}),(function(t){return n("loginFailure"),Promise.reject(t)}))},logout:function(t){var e=t.commit;Pt.logout(),e("logout")},register:function(t,e){var n=t.commit;return Pt.register(e).then((function(t){return n("registerSuccess"),Promise.resolve(t.data)}),(function(t){return n("registerFailure"),Promise.reject(t)}))}},mutations:{loginSuccess:function(t,e){t.status.loggedIn=!0,t.user=e},loginFailure:function(t){t.status.loggedIn=!1,t.user=null},logout:function(t){t.status.loggedIn=!1,t.user=null},registerSuccess:function(t){t.status.loggedIn=!1},registerFailure:function(t){t.status.loggedIn=!1}}};o["default"].use(_t["a"]);var It=new _t["a"].Store({modules:{auth:Ot}}),Ft=n("755e"),Lt=n("7bb1");o["default"].use(Lt),o["default"].use(Ft,{load:{key:"AIzaSyCyOBuqzRmGjbOEQCeHVDHHsjML57kUnKM",libraries:"places"}}),o["default"].use(kt.a),o["default"].config.productionTip=!1,new o["default"]({el:"#app",vuetify:xt,router:wt,store:It,render:function(t){return t(m)}}).$mount("#app")},"6a18":function(t,e,n){},"80bf":function(t,e,n){"use strict";n("4ecb")},9797:function(t,e,n){},ac59:function(t,e,n){"use strict";n("9797")},da41:function(t,e,n){"use strict";n("266e")}});
//# sourceMappingURL=app.732c1d5f.js.map